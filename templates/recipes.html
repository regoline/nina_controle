{% extends "base.html" %}

{% block content %}
<div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold text-primary mb-6">
        <i class="fas fa-utensils mr-2"></i>Receitas
    </h2>
    
    <div class="card mb-6">
		<div class="card-header bg-secondary text-white">
			<h4><i class="fas fa-list-ul mr-2"></i>Lista de Receitas</h4>
		</div>
		<div class="card-body">
			<!-- Mobile Cards View -->
			<div class="md:hidden space-y-3">
				{% for recipe in recipes %}
				<div class="bg-white p-4 rounded-lg shadow border">
					<div class="flex justify-between items-start">
						<div class="font-medium text-primary">{{ recipe[1] }}</div>
						<div class="flex space-x-2">
							<a href="{{ url_for('edit_recipe', recipe_id=recipe[0]) }}" 
							   class="text-primary hover:text-secondary p-1"
							   title="Editar">
								<i class="fas fa-edit"></i>
							</a>
							<a href="{{ url_for('delete_recipe', recipe_id=recipe[0]) }}" 
							   class="text-red-500 hover:text-red-700 p-1"
							   title="Excluir">
								<i class="fas fa-trash-alt"></i>
							</a>
						</div>
					</div>
					<div class="mt-3 space-y-2">
						<div>
							<div class="text-gray-500 text-sm">Preço Unitário</div>
							<div class="font-medium">R$ {{ "%.2f"|format(recipe[2])|replace('.', ',') }}</div>
						</div>
						<div>
							<div class="text-gray-500 text-sm">Preço Box (6 unid.)</div>
							<div class="font-medium">R$ {{ "%.2f"|format(recipe[3])|replace('.', ',') }}</div>
						</div>
					</div>
				</div>
				{% endfor %}
			</div>

			<!-- Desktop Table View (unchanged) -->
			<div class="hidden md:block">
				<table class="w-full">
					<thead>
						<tr class="border-b">
							<th class="text-left py-3 px-2">Nome</th>
							<th class="text-left py-3 px-2">Unitário</th>
							<th class="text-left py-3 px-2">Box</th>
							<th class="text-left py-3 px-2">Ações</th>
						</tr>
					</thead>
					<tbody>
						{% for recipe in recipes %}
						<tr class="border-b hover:bg-gray-50">
							<td class="py-3 px-2">{{ recipe[1] }}</td>
							<td class="py-3 px-2">R$ {{ "%.2f"|format(recipe[2])|replace('.', ',') }}</td>
							<td class="py-3 px-2">R$ {{ "%.2f"|format(recipe[3])|replace('.', ',') }}</td>
							<td class="py-3 px-2">
								<div class="flex space-x-2">
									<a href="{{ url_for('edit_recipe', recipe_id=recipe[0]) }}" 
									   class="text-primary hover:text-secondary p-1"
									   title="Editar">
										<i class="fas fa-edit"></i>
									</a>
									<a href="{{ url_for('delete_recipe', recipe_id=recipe[0]) }}" 
									   class="text-red-500 hover:text-red-700 p-1"
									   title="Excluir">
										<i class="fas fa-trash-alt"></i>
									</a>
								</div>
							</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
	</div>
    
    <div class="card mb-6">
        <div class="card-header bg-secondary text-white">
            <h4><i class="fas fa-plus-circle mr-2"></i>Adicionar Nova Receita</h4>
        </div>
        <div class="card-body">
            <form method="POST" action="{{ url_for('add_recipe') }}">
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2">
                        <i class="fas fa-tag text-primary mr-2"></i>Nome
                    </label>
                    <input type="text" name="name" 
                           class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-secondary" required>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-gray-700 mb-2">
                            <i class="fas fa-money-bill-wave text-primary mr-2"></i>Preço Unitário (R$)
                        </label>
                        <input type="text" name="unit_price" 
                               class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-secondary"
                               placeholder="3,50" pattern="^\d+,\d{2}$" required>
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-2">
                            <i class="fas fa-boxes text-primary mr-2"></i>Preço Kit (6 unidades) (R$)
                        </label>
                        <input type="text" name="box_price" 
                               class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-secondary"
                               placeholder="18,00" pattern="^\d+,\d{2}$" required>
                    </div>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2">
                        <i class="fas fa-align-left text-primary mr-2"></i>Descrição / Notas
                    </label>
                    <textarea name="description" 
                              class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-secondary h-32"></textarea>
                </div>
                <button type="submit" class="bg-secondary text-white px-6 py-2 rounded-lg hover:bg-opacity-90 transition">
                    <i class="fas fa-plus-circle mr-2"></i>Adicionar Receita
                </button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
