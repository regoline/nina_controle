{% extends "base.html" %}

{% block content %}
<div class="container">
    <h2 class="text-3xl font-bold text-primary mb-6">Ingredients</h2>
    
    <div class="card mb-6">
        <div class="card-header bg-secondary text-white">
            <h4>Add New Ingredient</h4>
        </div>
        <div class="card-body">
            <form method="POST" action="{{ url_for('add_ingredient') }}">
				<div class="mb-4">
					<label class="block text-gray-700 mb-2">Name</label>
					<input type="text" name="name" class="w-full px-3 py-2 border rounded" required>
				</div>
				<div class="mb-4">
					<label class="block text-gray-700 mb-2">Unit</label>
					<select name="unit" class="w-full px-3 py-2 border rounded" required>
						<option value="g">grams (g)</option>
						<option value="kg">kilograms (kg)</option>
						<option value="ml">milliliters (ml)</option>
						<option value="L">liters (L)</option>
						<option value="unit">unit</option>
						<option value="pack">pack</option>
					</select>
				</div>
				<div class="mb-4">
					<label class="block text-gray-700 mb-2">Quantity (weight/volume/units/packs)</label>
					<input type="number" step="0.01" name="quantity" class="w-full px-3 py-2 border rounded" required>
				</div>
				<div class="mb-4">
					<label class="block text-gray-700 mb-2">Total Cost</label>
					<input type="number" step="0.01" name="cost" class="w-full px-3 py-2 border rounded" required>
				</div>
				<button type="submit" class="bg-secondary text-white px-4 py-2 rounded hover:bg-opacity-90">Add Ingredient</button>
			</form>
        </div>
    </div>
    
    <div class="card">
        <div class="card-header bg-secondary text-white">
            <h4>Ingredient List</h4>
        </div>
        <div class="card-body">
            <table class="w-full">
				<thead>
					<tr class="border-b">
						<th class="text-left py-2">Name</th>
						<th class="text-left py-2">Quantity</th>
						<th class="text-left py-2">Unit</th>
						<th class="text-left py-2">Total Cost</th>
						<th class="text-left py-2">Unit Cost</th>
						<th class="text-left py-2">Actions</th>
					</tr>
				</thead>
				<tbody>
					{% for ingredient in ingredients %}
					<tr class="border-b">
						<td class="py-2">{{ ingredient[1] }}</td>
						<td class="py-2">{{ "%.2f"|format(ingredient[3]) }}</td>
						<td class="py-2">{{ ingredient[2] }}</td>
						<td class="py-2">${{ "%.2f"|format(ingredient[4]) }}</td>
						<td class="py-2">
							{% if ingredient[2] in ['g', 'kg', 'ml', 'L'] %}
								${{ "%.4f"|format(ingredient[4]/ingredient[3]) }}/{{ ingredient[2] }}
							{% else %}
								${{ "%.2f"|format(ingredient[4]/ingredient[3]) }} per {{ ingredient[2] }}
							{% endif %}
						</td>
						<td class="py-2">
							<a href="{{ url_for('edit_ingredient', ingredient_id=ingredient[0]) }}" class="text-primary hover:text-secondary mr-2">Edit</a>
							<a href="{{ url_for('delete_ingredient', ingredient_id=ingredient[0]) }}" class="text-red-500 hover:text-red-700">Delete</a>
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
        </div>
    </div>
</div>
{% endblock %}
